<html>
    <head>      
    <script src="https://unpkg.com/ipfs-http-client/dist/index.min.js"></script>  
    <!--script src="https://bundle.run/buffer"></script-->  
    
  <!--  https://packd.now.sh/buffer -->
    
    <script src="buffer@5.6.0.js"></script>  
    
 </head>
    <body>
        <h1>IPFS add (Infura)</h1>
        <pre id="log" style="width:100%;height:200px"></pre>
        <script type="text/javascript">
        function log(logstr) {   
            document.getElementById("log").innerHTML +=logstr+"\n";
        }
        async function f() {
            const str="Web3examples \r\n"; // note: trailing space, CR, LF
            const Buffer=window.buffer.Buffer;
            const ipfs = window.IpfsHttpClient('https://ipfs.infura.io:5001');         
            const bufDataToHash = Buffer.from(str);
            log(`Adding ${str} to ipfs via Infura`);
            const hash=await ipfs.add(bufDataToHash) //.catch(console.log); 
            console.log(hash)
            log(`Hash ${hash[0].hash}`);
        }
        f();
		</script>
	</body>
</html>
